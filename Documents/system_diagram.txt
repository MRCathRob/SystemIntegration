@startuml
rectangle "UI (3D Slicer) {
  usecase "Visualization" as UI_SlicerVis
  usecase "Planning" as UI_SlicerPlan
  usecase "ros2_igtl_bridge (IN)" as UI_IGTLIN
  usecase "ros2_igtl_bridge (OUT)" as UI_IGTLOUT
  usecase "Robot Parameter Setting GUI" as UI_Param
  usecase "Robot Control GUI" as UI_Switch
}

rectangle "MR Scanner" {
  usecase "Access-i" as MR_SRC
  usecase "DICOM Server" as MR_DICOM_Server
}

rectangle "Cath Robot (Master)" {
  usecase "Hardware" as CathRob_Master_Hardware
  usecase "ROS Master Manipulator Node" as CathRob_Master_Node
}

rectangle "Cath Robot (Slave)" {
  usecase "Inverse Kinematics (IK)" as CathRob_IK
  usecase "Forward Kinematics (FK)" as CathRob_FK
  usecase "Planner" as CathRob_Planner
  usecase "Motion Controller" as CathRob_MotionController
  usecase "Hardware" as CathRob_Slave_Hardware
}

MR_DICOM_Server --> UI_SlicerVis
:Operator: --> UI_SlicerPlan
:Operator: <-- UI_SlicerVis
:Operator: --> UI_Param
:Operator: --> UI_Switch

UI_SlicerPlan --> UI_IGTLIN
UI_SlicerVis <-- UI_IGTLOUT

UI_IGTLOUT ---> CathRob_Planner : /subject/state/skin_entry \n geometry_msg/msg/Point
CathRob_Planner --> CathRob_IK
CathRob_IK --> CathRob_MotionController
CathRob_Encoders --> CathRob_FK

CathRob_FK --> UI_IGTLIN : /cathrob/state/current_shape \n geometry_msg/msg/PoseArray

@enduml

@startuml
rectangle UI {
  usecase "3D Slicer (Visualization)" as UI_SlicerVis
  usecase "3D Slicer (Planning)" as UI_SlicerPlan
  usecase "ros2_igtl_bridge (IN)" as UI_IGTLIN
  usecase "ros2_igtl_bridge (OUT)" as UI_IGTLOUT
  usecase "Parameter Setting" as UI_Param
  usecase "Activation Switch" as UI_Switch
}

rectangle "MR Scanner" {
  usecase "Access-i" as MR_SRC
  usecase "DICOM Server" as MR_DICOM_Server
}

rectangle "Cath Robot" {
  usecase "Inverse Kinematics" as CathRob_IK
  usecase "Forward Kinematics" as CathRob_FK
  usecase "Planner" as CathRob_Planner
  usecase "Motion Controller" as CathRob_MotionControllers
  usecase "Encoders" as CathRob_Encoders
}

MR_DICOM_Server --> UI_SlicerVis
:Operator: --> UI_SlicerPlan
:Operator: <-- UI_SlicerVis
:Operator: --> UI_Param
:Operator: --> UI_Switch

UI_SlicerPlan --> UI_IGTLIN
UI_SlicerVis <-- UI_IGTLOUT

UI_IGTLOUT ---> CathRob_Planner : /subject/state/skin_entry \n geometry_msg/msg/Point
CathRob_Planner --> CathRob_IK
CathRob_IK --> CathRob_MotionController
CathRob_Encoders --> CathRob_FK

CathRob_FK --> UI_IGTLIN : /cathrob/state/current_shape \n geometry_msg/msg/PoseArray

@enduml
